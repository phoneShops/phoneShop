<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE  mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.phone.dao.ProductData11">
    
     <resultMap id="BaseResultMap" type="com.phone.pojo.Product" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 14:54:13 CST 2018.
    -->
    <id column="pid" property="pid" jdbcType="INTEGER" />
    <result column="pname" property="pname" jdbcType="VARCHAR" />
    <result column="type_id" property="typeId" jdbcType="INTEGER" />
    <result column="price" property="price" jdbcType="DOUBLE" />
    <result column="discount" property="discount" jdbcType="INTEGER" />
    <result column="describes" property="describes" jdbcType="VARCHAR" />
    <result column="detail" property="detail" jdbcType="VARCHAR" />
    <result column="stock" property="stock" jdbcType="INTEGER" />
    <result column="status" property="status" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Apr 26 14:54:13 CST 2018.
    -->
    pid, pname, type_id, price, discount, describes, detail, stock, status
  </sql>
  
	<!-- 根据商品具体类查询信息  -->
	<select id="queryProduct" resultMap="BaseResultMap" parameterType="java.lang.Integer">
		
	 	SELECT
			*
		FROM
			product
		WHERE 1=1
			<if test="key != null and key !='' ">
		 	AND 
		 			( pname like CONCAT('%',#{key},'%')
		 		OR 
		 			pid like CONCAT('%',#{key},'%') )
			</if>
		ORDER BY 
			price 	DESC
		LIMIT 
			#{pageIndex},#{pageSize} 
	</select>
	<!-- 返回产品表总数  -->
	<select id="queryProductCount" parameterType="map" resultType="int">
		SELECT
			COUNT(1)
		FROM
			product
		WHERE 1=1
			<if test="key != null and key !='' ">
		 	AND 
		 			( pname like CONCAT('%',#{key},'%')
		 		OR 
		 			type_id like CONCAT('%',#{key},'%') )
			</if>
		ORDER BY 
		price 	DESC
	</select>
</mapper>